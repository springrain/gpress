{{template "admin/header.html"}}
<title>更新站点信息 - gpress</title>
{{template "admin/bodystart.html"}}
        <div class="layui-card layui-panel">
          <div class="layui-card-header">
            更新站点信息
          </div>
          <div class="layui-card-body">
            <form class="layui-form" id="gpress-form" action="{{basePath}}admin/{{.UrlPathParam}}/update" method="POST">
				<div class="layui-form-item layui-col-md6">
				  <label class="layui-form-label">ID</label>
				  <div class="layui-input-block">
					<input type="hidden" name="id" id="id" value="{{.Data.Id}}" />
				    <input type="hidden" name="sortNo" id="sortNo" value=1 />
				    <input type="hidden" name="status" id="status" value=1 />
					<input type="text" class="layui-input" disabled value="{{.Data.Id}}" />
				  </div>
				</div>
				<div class="layui-form-item layui-col-md6">
					<label class="layui-form-label">标题</label>
					<div class="layui-input-block">
					  <input type="text" name="title" lay-verify="required" autocomplete="off" lay-reqtext="请填写标题" lay-affix="clear" class="layui-input"  value="{{.Data.Title}}">
					</div>
				</div>

				<div class="layui-form-item layui-col-md6">
				  <label class="layui-form-label">名称</label>
				  <div class="layui-input-block">
					<input type="text" name="name" lay-verify="required" autocomplete="off" lay-reqtext="请填写名称" lay-affix="clear" class="layui-input" value="{{.Data.Name}}">
				  </div>
				</div>
				<div class="layui-form-item layui-col-md6">
				  <label class="layui-form-label">域名</label>
				  <div class="layui-input-block">
					<input type="text" name="domain" autocomplete="off" lay-affix="clear" class="layui-input" value="{{.Data.Domain}}">
				  </div>
				</div>
				<div class="layui-form-item layui-col-md6">
					<label class="layui-form-label">keyword</label>
					<div class="layui-input-block">
					  <input type="text" name="keyword" autocomplete="off" lay-affix="clear" class="layui-input" value="{{.Data.Keyword}}">
					</div>
				</div>
				<div class="layui-form-item layui-col-md6">
					<label class="layui-form-label">站点描述</label>
					<div class="layui-input-block">
					  <input type="text" name="description" autocomplete="off" lay-affix="clear" class="layui-input" value="{{.Data.Description}}">
					</div>
				</div>
				<div class="layui-form-item layui-col-md6">
					<label class="layui-form-label">Logo</label>
					<div class="layui-input-block">
					  <input type="text" name="logo" autocomplete="off" lay-affix="clear" class="layui-input" value="{{.Data.Logo}}">
					</div>
				</div>
				<div class="layui-form-item layui-col-md6">
					<label class="layui-form-label">Favicon</label>
					<div class="layui-input-block">
					  <input type="text" name="favicon" autocomplete="off" lay-affix="clear" class="layui-input" value="{{.Data.Favicon}}">
					</div>
				</div>
				<div class="layui-form-item layui-col-md6">
					<label class="layui-form-label">底部信息</label>
					<div class="layui-input-block">
					  <textarea name="footer" placeholder="底部信息"  autocomplete="off" class="layui-textarea">{{.Data.Footer}}</textarea>
					</div>
				</div>
				<div class="layui-form-item">
					<div class="layui-input-block">
					  <button type="submit" class="layui-btn layui-bg-blue" lay-submit lay-filter="gpress-form-ajax-update">提交修改</button>
					</div>
				</div>
			</form>
          </div>
        </div>
{{template "admin/bodyend.html"}}

<script>
	layui.use(function(){
	  var form = layui.form;
	  var layer = layui.layer;
	  var $ =layui.jquery;
	  // 提交事件
	  form.on('submit(gpress-form-ajax-update)', function(data){
		var field = data.field; // 获取表单字段值
		field.sortNo=field.sortNo-0;
		field.status=field.status-0;
		const form = document.getElementById('gpress-form');
		$.ajax({
			url:form.action,
			type:form.method,
			contentType: "application/json;charset=utf-8",
			dataType:"json",
			data:JSON.stringify(field),
			error:function(){
				layer.msg("修改错误,请重试!");
			},
			success:function(result){
				if (result.statusCode == 1) {
					layer.msg("修改成功!");
				}else{
					layer.msg("修改失败!");
				}
			}
		});
        return false; // 阻止默认 form 跳转

	  });
	});
	</script>
