{{template "admin/header.html"}}
  <title>tableInfo - GPRESS</title>
{{template "admin/bodystart.html"}}

{{ $tableFiled := tableFiled .urlPathParam }}
{{$path := .urlPathParam}}
<section class="section">
  <div class="container" >
    <!-- 搜索表单 -->
    <form class="field is-horizontal" action="{{basePath}}admin/{{.urlPathParam}}/list" method="GET">
      <div class="field-body">
        <div class="field">
          <div class="control">
            <input class="input" type="text" name="q" placeholder="Search...">
          </div>
        </div>
        <div class="field">
          <div class="control">
            <button class="button is-link" type="submit">Search</button>
          </div>
        </div>
        <div class="field">
          <div class="control">
            <a href="{{basePath}}admin/{{.urlPathParam}}/save" class="button is-link" type="submit">新增</a>
          </div>
        </div>
      </div>
    </form>

    <!-- 列表 -->
    <table class="table is-fullwidth">

     
      <thead>
        <tr>
          <!-- 循环表头 -->
          {{ range $tableFiled }}
          <th>{{.FieldName}}</th>
          {{end }}
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <!-- 循环所有的数据 -->
        {{ range $i,$v := .data }}
        <tr>
          <!-- 循环表头,需要和表格的表头对应 -->
          {{ range $tableFiled }}
          <!-- 获取每一列的值 -->
          <td> {{ index $v .FieldCode }}</td>
          {{end }}
          <td> <a href="{{basePath}}admin/{{$path}}/look?id={{$v.id}}" >查看</a></td>
          <td> <input type="button" onclick="deleteFunc(this.id)" id="{{$v.id}}"  value="删除"></input></td>
        </tr>
        {{end }}
       
      </tbody>

    </table>

    <!-- 分页条 -->
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
      <div class="flex">
        <div class="lineheight40">共 {{ .page.TotalCount }} 条</div>
        <div ><a class="pagination-link" aria-label="总页数">共 {{ .page.PageCount }} 页</a></div>
        <div ><a class="pagination-previous">上一页</a></div>
        <ul class="pagination-list ">
          <li>
            <span class="pagination-ellipsis">&hellip;</span>
          </li>
          <li>
            <a class="pagination-link is-current" aria-label="当前页" aria-current="page">{{ .page.PageNo }}</a>
          </li>
          <li>
            <a class="pagination-link" aria-label="跳转到第2页">2</a>
          </li>
          <li>
            <a class="pagination-link" aria-label="跳转到第3页">3</a>
          </li>
          <li>
            <span class="pagination-ellipsis">&hellip;</span>
          </li>
          <li>
            <a class="pagination-link" aria-label="跳转到最后一页">10</a>
          </li>
        </ul>
        <div ><a class="pagination-next">下一页</a></div>
        <div class="pagination-page flex">
          <button class="button ">跳转</button>
          <input class="input " type="text" placeholder="页码">
        </div>
      </div>
    </nav>
    




  </div>
</section>
<script>
  function deleteFunc(id){
    debugger;
    $.ajax ({
      type:'Post',
      url:'{{basePath}}admin/{{$path}}/delete',
      data:{id: id},
      success:function(res){
         if (res.statusCode == 1){
           alert("删除成功");
           location.reload()
         }
      }
    })
  }

</script>
        
{{template "admin/bodyend.html"}}
     
